
name: Elixir CI

on: [push, pull_request, workflow_dispatch]

jobs:
    build:
        runs-on: ubuntu-latest

        environment: troodon

        strategy:
            matrix:
                elixir: [latest]
                otp: [latest]

        steps:
            - name: Checkout code
              uses: actions/checkout@v2

            - name: Set up Elixir
              uses: erlef/setup-beam@v1
              with:
                  elixir-version: ${{ matrix.elixir }}
                  otp-version: ${{ matrix.otp }}

            - name: Install dependencies
              run: mix deps.get

            - name: Run tests
              run: mix test
              env:
                TESLA_COMPLETE_URL: ${{ secrets.TESLA_COMPLETE_URL }}
                SESSION_TOKEN: ${{ secrets.SESSION_TOKEN }}
                DAY20241204_PART_1: ${{ secrets.DAY20241204_PART_1 }}
                DAY20241204_PART_2: ${{ secrets.DAY20241204_PART_2 }}
