defmodule AletopeltaTest.Year2017.Knot do
  use ExUnit.Case, async: true
  alias Aletopelta.Year2017.Knot

  test "empty imput" do
    assert Knot.new([]) == "A2582A3A0E66E6E86E3812DCB672A272"
  end

  test "parse" do
    assert Knot.parse("surprise") == ~c"surprise"
  end

  test "raw" do
    assert Knot.raw(~c"hello") == [
             112,
             113,
             114,
             115,
             116,
             117,
             118,
             119,
             120,
             121,
             122,
             123,
             124,
             125,
             126,
             127,
             128,
             129,
             130,
             131,
             132,
             133,
             134,
             135,
             136,
             137,
             237,
             236,
             235,
             234,
             233,
             232,
             231,
             230,
             229,
             228,
             227,
             226,
             225,
             224,
             223,
             222,
             221,
             220,
             219,
             218,
             217,
             216,
             215,
             214,
             213,
             212,
             211,
             210,
             209,
             208,
             207,
             206,
             45,
             44,
             141,
             142,
             143,
             144,
             145,
             146,
             147,
             148,
             149,
             150,
             151,
             152,
             153,
             154,
             155,
             156,
             157,
             158,
             159,
             160,
             161,
             162,
             163,
             164,
             165,
             166,
             167,
             168,
             169,
             170,
             171,
             172,
             173,
             174,
             175,
             176,
             177,
             178,
             179,
             180,
             181,
             182,
             183,
             184,
             185,
             186,
             187,
             188,
             189,
             190,
             191,
             192,
             193,
             194,
             195,
             196,
             197,
             198,
             199,
             200,
             201,
             202,
             203,
             204,
             0,
             1,
             2,
             3,
             4,
             5,
             6,
             7,
             8,
             9,
             10,
             11,
             12,
             13,
             14,
             15,
             16,
             17,
             18,
             19,
             20,
             21,
             22,
             23,
             24,
             25,
             26,
             27,
             28,
             29,
             30,
             31,
             32,
             33,
             34,
             35,
             36,
             37,
             38,
             39,
             40,
             41,
             42,
             43,
             140,
             139,
             138,
             238,
             239,
             240,
             241,
             242,
             243,
             244,
             245,
             246,
             247,
             248,
             249,
             250,
             251,
             252,
             253,
             254,
             255,
             103,
             102,
             101,
             100,
             99,
             98,
             97,
             96,
             95,
             94,
             93,
             92,
             91,
             90,
             89,
             88,
             87,
             86,
             85,
             84,
             83,
             82,
             81,
             80,
             79,
             78,
             77,
             76,
             75,
             74,
             73,
             72,
             71,
             70,
             69,
             68,
             67,
             66,
             65,
             64,
             63,
             62,
             61,
             60,
             59,
             58,
             57,
             56,
             55,
             54,
             53,
             52,
             51,
             50,
             49,
             48,
             47,
             46,
             205,
             104,
             105,
             106,
             107,
             108,
             109,
             110,
             111
           ]
  end

  test "new length" do
    test =
      ~c"merge"
      |> Knot.new()
      |> String.length()

    assert test === 32
  end

  test "parse length" do
    input = "something"
    parsed = Knot.parse(input)

    assert length(parsed) === String.length(input)
  end

  test "raw length" do
    final = Knot.raw(~c"advent")

    assert length(final) === 256
  end
end
